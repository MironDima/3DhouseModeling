(()=>{"use strict";const e=({timing:e,draw:t,duration:a})=>{let o=performance.now();requestAnimationFrame((function r(n){let l=(n-o)/a;l>1&&(l=1);let c=e(l);t(c),l<1&&requestAnimationFrame(r)}))};(e=>{const t=document.getElementById("timer-days"),a=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds");let n;const l=()=>{let e=(()=>{let e=(new Date("30 may 2023").getTime()-(new Date).getTime())/1e3;return{timeRemainig:e,days:Math.floor(e/60/60/24),hours:Math.floor(e/60/60%24).toString().padStart(2,"0"),minutes:Math.floor(e/60%60).toString().padStart(2,"0"),seconds:Math.floor(e%60).toString().padStart(2,"0")}})();e.timeRemainig>0&&(t.textContent=e.days,a.textContent=e.hours,o.textContent=e.minutes,r.textContent=e.seconds),e.timeRemainig<=0&&clearInterval(n)};l(),n=setInterval(l,1e3)})(),(()=>{document.querySelector(".menu");const e=document.querySelector("menu"),t=(e.querySelector(".close-btn"),document.querySelector("main"),()=>{e.classList.toggle("active-menu")});document.addEventListener("click",(a=>{a.target.closest(".menu")?t():a.target.closest("menu")?a.target.classList.contains("close-btn")?(a.preventDefault(),t()):a.target.matches("ul>li>a")&&t():e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelectorAll("ul > li > a"),t=document.querySelectorAll('a[href = "#service-block"]');e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const a=e.getAttribute("href").substring(1);document.getElementById(a).scrollIntoView({behavior:"smooth",block:"start"})}))})),t.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const a=e.getAttribute("href").substring(1);document.getElementById(a).scrollIntoView({behavior:"smooth",block:"start"})}))}))})(),(()=>{const t=document.querySelectorAll(".popup-btn"),a=document.querySelector(".popup"),o=a.querySelector(".popup-content"),r=document.documentElement.clientWidth;o.style.transform="translateX(-100px)",t.forEach((t=>{t.addEventListener("click",(()=>{r>=768?e({duration:500,timing:e=>e,draw(e){a.style.display="block",o.style.transform=`translateX(${50*e}px)`,o.style.opacity=e}}):(o.style.transform="translate(-50px,50px)",a.style.display="block")}))})),a.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(a.style.display="none",o.style.transform="translateX(-100px)")}))})(),(()=>{const e=document.querySelectorAll(".service-tab"),t=document.querySelectorAll(".service-header-tab");document.querySelector(".service-header").addEventListener("click",(a=>{if(a.target.closest(".service-header-tab")){const o=a.target.closest(".service-header-tab");t.forEach(((t,a)=>{t===o?(t.classList.add("active"),e[a].classList.remove("d-none")):(t.classList.remove("active"),e[a].classList.add("d-none"))}))}}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),a=document.createElement("ul");a.classList.add("portfolio-dots"),t.forEach(((e,t)=>{const o=document.createElement("li");o.classList.add("dot"),0===t&&o.classList.add("dot-active"),a.append(o)})),e.append(a)})(),((e,t)=>{const a=document.querySelector(`.${e}`),o=document.querySelectorAll(`.${t}`);if(a&&o.length>0){const e=document.querySelectorAll(".dot");let t,r=2e3,n=0;const l=(e,t,a="portfolio-item-active",o="dot-active")=>{e[t].classList.remove(a),e[t].classList.remove(o)},c=(e,t,a="portfolio-item-active",o="dot-active")=>{e[t].classList.add(a),e[t].classList.add(o)},s=()=>{l(o,n,"portfolio-item-active"),l(e,n,"dot-active"),n++,n>=o.length&&(n=0),c(o,n,"portfolio-item-active"),c(e,n,"dot-active")},i=(e=1500)=>{t=setInterval(s,e)},u=()=>{clearInterval(t)};a.addEventListener("click",(t=>{t.preventDefault(),t.target.matches(".dot, .portfolio-btn")&&(console.log(),l(o,n,"portfolio-item-active"),l(e,n,"dot-active"),t.target.matches("#arrow-right")?n++:t.target.matches("#arrow-left")?n--:t.target.classList.contains("dot")&&e.forEach(((e,a)=>{t.target===e&&(n=a)})),n>=o.length&&(n=0),n<0&&(n=o.length-1),c(o,n,"portfolio-item-active"),c(e,n,"dot-active"))})),a.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&u()}),!0),a.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&i(r)}),!0),i(r)}})("portfolio-content","portfolio-item"),(()=>{const e=document.querySelector(".calc-square"),t=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),o=e=>{e.target.value=e.target.value.replace(/\D+/gi,"")};e.addEventListener("input",o),t.addEventListener("input",o),a.addEventListener("input",o)})(),((t=100)=>{const a=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),l=document.querySelector(".calc-day");let c=document.getElementById("total"),s=0;a.addEventListener("input",(a=>{a.target!==o&&a.target!==r&&a.target!==n&&a.target!==l||(()=>{const a=+o.options[o.selectedIndex].value,i=r.value;let u=1,d=1;n.value>1&&(u+=n.value/10),l.value&&l.value<5?d=2:l.value&&l.value<10&&(d=1.5),o.value&&r.value?(s=t*a*i*u*d,(t=>{let a=document.getElementById("total");e({duration:2e3,timing:e=>e,draw(e){a.textContent=Math.round(e*t)}})})(s)):s=0,c.textContent=s})()}))})(200),document.querySelectorAll("form").forEach((e=>{const t=e=>{let t=/^[\s\-]+|[\s\-]+$/;return e=e.replace(t,""),t=/\-{2,}/g,e.replace(t,"-")};e.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{if("user_name"===e.target.name){const a=/[^а-яА-ЯёЁ\s]/gi;e.target.value=e.target.value.replace(a,""),e.target.value=t(e.target.value),e.target.value=e.target.value.replace(/(\s|^)[а-яёa-z]/g,(e=>e.toUpperCase()))}if("email"===e.target.type){const a=/[^\d\w\-\~\_\!\'\s\.\*\@]/gi;e.target.value=e.target.value.replace(a,""),e.target.value=t(e.target.value)}if("tel"===e.target.type){const a=/[^0-9\+(\)\-]/gi;e.target.value=e.target.value.replace(a,""),e.target.value=t(e.target.value)}if("user_message"===e.target.name){const a=/[^а-яА-ЯёЁ\s\d\,\.\;\:\...\!\?\-\(\)\"]/gi;e.target.value=e.target.value.replace(a,""),e.target.value=t(e.target.value),e.target.value=e.target.value.replace(/(\s|^)[а-яёa-z]/g,(e=>e.toUpperCase()))}}))}))})),(({formId:e,someElem:t=[]})=>{e.forEach((e=>{const a=document.getElementById(e),o=document.getElementById("total"),r="Ошибка..";let n=document.createElement("div");n.classList.add("prelouder"),n.innerHTML='<img src = "images/prelouder.gif" alt = "prelouder">';let l=document.createElement("div");l.classList.add("inform");try{if(!a)throw new Error("Не правильная выбранная форма");a.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=a.querySelectorAll("input"),c=new FormData(a),s={};var i;a.append(n),setTimeout((()=>{n.classList.add("hide-prelouder")}),1500),a.append(l),c.forEach(((e,t)=>{s[t]=e})),t.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type?s[e.id]=t.textContent:"input"===e.type&&(s[e.id]=t.value)})),document.querySelector("#form2-message").value.trim()||delete s.user_message,"0"==o.textContent&&delete s.total,(e=>{let t=!0;return e.forEach((e=>{var a;"user_name"===e.name?e.value.length<3&&(t=!1):"user_email"===e.name?(a=e.value,/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a)||(t=!1)):"user_phone"===e.name&&e.value.length<9&&(t=!1)})),t})(e)?(i=s,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(i),headers:{"Content-type":"application/json"}}).then((e=>e.json()))).then((t=>{l.textContent="Успешно! С вами свяжется наш специалист",e.forEach((e=>{e.value="",setTimeout((()=>{l.textContent=""}),4e3)}))})).catch((e=>l.textContent=r)):(l.textContent=r,alert("Данные не валидны!"))})()}))}catch(e){console.log(e.message)}}))})({formId:["form1","form2","form3"],someElem:[{type:"block",id:"total"}]})})();